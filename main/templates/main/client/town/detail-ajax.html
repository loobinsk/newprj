{% load main_tags %}

<div class='town-detail town-item-{{ town.id }} editable-content'>
    <div class='content'>
        <h1 class='page-title'>{{ town.title }}</h1>

        {% if town.latitude and town.longitude and town.zoom %}
            <script src="http://api-maps.yandex.ru/2.0-stable/?load=package.standard,package.geoObjects&lang=ru-RU" type="text/javascript"></script>

            <script type="text/javascript">
                function init(){
                    var myMap, myPlacemark;

                    myMap = new ymaps.Map("business-map", {
                        center: [{{ town.latitude|stringformat:'f' }}, {{ town.longitude|stringformat:'f' }}],
                        zoom: {{ town.zoom|stringformat:'d' }}
                    });

                    myMap.controls.add('zoomControl');
                    myMap.controls.add('typeSelector');
                }

                ymaps.ready(init);
            </script>

            <div class="map" id="business-map" style="width: 100%; height: 300px;"></div>
        {% endif %}

        <p>Широта: {{ town.latitude|default_if_none:'-' }}</p>
        <p>Долгота: {{ town.longitude|default_if_none:'-' }}</p>
        <p>Масштаб: {{ town.zoom|default_if_none:'-' }}</p>
    </div>
    {% include 'main/client/town/edit-buttons.html' %}
</div>